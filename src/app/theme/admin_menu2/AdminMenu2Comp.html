<div class="sidebar" [ngClass]="{'collapsed': isCollapsed}">
  <div class="logo-container">
    <button class="logo" (click)="toggleSidebar()">
      <i class="fas fa-bars"></i>
    </button>
    <div class="logo-text" *ngIf="!isCollapsed">
      App
    </div>
    <button class="btn-close" (click)="closeSidebar()" *ngIf="!isCollapsed">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <ul class="sidebar-list" style="list-style: none;">
    <li *ngFor="let item of menuItemList; let i = index" class="sidebar-item">
      <a href="#" (click)="toggleSubmenu(i)" [ngClass]="{'has-submenu': item.subMenuItemList}">
        <i class="{{ item.icon }}"></i>
        <span *ngIf="!isCollapsed" class="px-2">{{ item.label }}</span>
      </a>
      <!-- First level submenu items -->
      <div *ngIf="item.subMenuItemList" [ngClass]="{'show': activeSubmenuIndex === i, 'submenu-popout': isCollapsed}" 
      class="submenu-container">
        <ul class="submenu" style="list-style: none;">
          <li *ngFor="let subItem of item.subMenuItemList; let j = index" class="submenu-item">
            <a href="#" (click)="toggleNestedSubmenu(i, j)" [ngClass]="{'has-submenu': subItem.subMenuItemList}">
              <i class="{{ subItem.icon }}"></i>
        <span *ngIf="!isCollapsed" class="px-2">{{ subItem.label }}</span>
              
            </a>
            <!-- Second level submenu items -->
            <div *ngIf="subItem.subMenuItemList" [ngClass]="{'show': nestedSubmenuIndex[i] === j, 'submenu-popout': isCollapsed}" class="submenu-container">
              <ul class="submenu">
                <li *ngFor="let nestedSubItem of subItem.subMenuItemList; let k = index" class="submenu-item">
                  <a href="#">{{ nestedSubItem.label }}</a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</div>
